namespace MM.Tests
{
    using System;
    using System.Collections.Generic;
    using MM.Domain.Services;
    using MM.Infrastructure.GoogleAI;
    using Xunit;

    public class GoogleAITests
    {
        [Fact]
        public void GetCategories_ReturnsCategoryNames_WhenDescriptionIsProvided()
        {
            Environment.SetEnvironmentVariable("GOOGLE_APPLICATION_CREDENTIALS", "/Users/ivanpaulovich/google.json");

            IGoogleAIService googleAIService = new GoogleAIService();
            string body = "If you are going to work as a Java Developer, you need to be at a company where you get the right prerequisites to develop your technical competencies in your new career. That is why Pricer have both Code Review and Lab-Fridays where you get to use your creativity to do... well, whatever you want! You want to know more about this? Read further!\n\nOM TJÄNSTEN \nAcademic Work is on behalf of our client Pricer looking for 4 Java Developers (both Jr and Sr.). What does Pricer do? Check it out! \n\n\n\nAs a Java Developer you will be placed at their R&amp;D department where you will work closely with senior developers, architects, testers, business analyst and a UX-designer. The team work with Code Reviews, where you will have a senior developer going through your code, but also, get the chance to review a senior co-workers code – everything so that you can easier understand, learn, and, of course, make sure Pricer keeps the highest quality! On Lab-Fridays, everyone gets to be creative, go nuts and create that dream project you’ve always wanted to do but never had time to! The team is prestigeless, and like to keep a good spirit! The Software Manager Tess says that everyone at Pricer is a tech-geek, at Pricer they love technology! \n\nThis is a consultant assignment. Academic Work will be your employer and you will work as a consultant at Pricer. The assignment will be full time and extend until further notice. There are good opportunities to be extended on the assignment, given that all parties are satisfied with the cooperation.\n\nARBETSUPPGIFTER \nAs a Java Developer, you will work in one of two teams at Pricers R&amp;D department. All developers are flexible and will work either more front-end or back-end, but depending on your interest – you will get the opportunity to specialize! They work agile using Kanban methodology in order to move projects forward. Here you will get the opportunity to learn and work with Cloud Services (Azure, AWS), Angular, Boostrap, RESTful webservices, Spring, Mobile Development (Android &amp; iOS), JavaScript, CSS, HTML &amp; SQL among others. Welcome to this tech-loving crew! \n\nFor example, you will: \n\n\n* Write excellent Java Code :)\n* Test your code using Unit tests \n* Do Code Reviews (and get your code reviewed!)\n* Participate in meetings, where you will share your ideas regarding new features, technical improvements, bugs, release planning and everything else! \n* Participate in Daily Stand-ups at 14.00 (It’s about 5 minutes of your time) \n* Help with 3rd line support questions (If you are a senior developer!)\n\n\nThe position suits you who want to kick-start your career and get the opportunity to really develop!\n\nVI SÖKER DIG SOM \n* Have an academic degree within computer science \n* Knows Java well, which you will show with a technical Test \n* Speaks English fluently at a professional level\n* Knows some Swedish \n\nIt will be considered an additional qualification if you…\n\n\n* Have an engineering background, and knows a bit of hardware \n* Knows any of the cool techniques you will otherwise learn at Pricer\n\n\nAs a person, you are like the team at Pricer: prestigeless and perhaps a bit geeky! Of course you are also self-going and takes a lot of responsibility for your own work in order to make sure it gets done. You love to share your ideas and you are not afraid to speak up. Although, you don't have to win every time. You like good cooperation and work in order to make that happen. \n\nOTHER INFORMATION  \n\n\n* Start: January/February\n* Work extent: Full-time ongoing\n* Location: Central Stockholm - close to the train station! \n* This recruitment process is conducted by Academic Work. The request from Pricer is that all questions regarding the position is handled by\nAcademic Work\n* Apply by pressing the “Apply here” button below. Our selection process is continuous and the advert may close before the recruitment process is completed if we have moved forward to the screening or interview phase. If you have a last date for application, keep in mind that you cannot close the advert before all applications has been reviewed. \n* We do not handle applications through e-mail, but if you have questions about the position you are welcome to email us at teammailadress@academicwork.se and we will answer during office hours. Please write the advert title in the subject and paste the advert link in the mail. For general considerations about your applications/our recruitment process, we are often available in our chat function on our web during weekdays. Feel free to contact us there! \n\n\nABOUT US\n\nAcademic Work is Home of the young professionals. This means that most of our jobs are relevant for you who are studying at university or has completed your studies and are in the beginning of your career. You can work as a consultant on a specific assignment, be recruited directly by one of our clients through our recruitment service or start you career by working internally at any of our Academic Work offices. Find more information on our website www.academicwork.se.\n\n\n* We strive to be an attractive employer to our consultants. In addition to collective agreement and a dedicated consultant manager, we offer you as a full time consultant a consultant portal, giving you access to several benefits. Read more [here]((https://www.academicwork.se/vart-erbjudande-till-heltidskonsulter)\n\n\nINFORMATION OM FÖRETAGET \nPricer is the world leading company within development and sales of digital price signs to stores in Sweden and internationally. Their biggest market is in France, but the company also have offices in Hongkong, Atlanta and Barcelona for example. Around 100 people work in the company and daily they send out around 100 000 price signs. Within the organization you will work with a highly competent development team with a high technical interest. For example you have lab-day every second Friday where you have the opportunity to dive in to any technical area of your preference. Here you will come to a company that has a great focus on competence development and education. Welcome on board!";

            List<string> categories = googleAIService.GetCategories(body);

            Assert.NotNull(categories);
            Assert.NotEmpty(categories);
            Assert.Equal(4, categories.Count);
        }
        
    }
}